# Concepts

## Handling Identity Columns

In WMS, many tables use auto-generated identity columns (`ID`) as primary keys. These IDs are unique to each environment and not manually assigned.

### The Problem

Using these IDs directly across environments (e.g., from development to production) can cause:

- Conflicts if the same ID exists for different data
- Data corruption or referential mismatches
- Inconsistencies due to environment-specific sequences

### Our Solution

- **view based tracking**: Changes are tracked in the views that have all the fields and description of the change in the case mov_cod and its decription make it a unique entity.

- **Use Standard Commands**: Control files use BY-standard commands like `Create Movement Zone`, excluding IDs. New IDs are auto-generated by the system during execution, ensuring consistency across environments.



## Descriptive Views

Descriptive views are created for identity-based tables to provide complete, trackable representations of the data.

- These views include:
  - All fields necessary for tracking
  - Codes and descriptions 

### Example

For a `Movement Zone`, the descriptive view contains its code, type, and description.

- This ensures that:
  - The correct data is captured during exports
  - It can be reliably redeployed in other environments using standard commands



## Managing Deletes

Deletes are handled cautiously to prevent data loss or broken dependencies.

- **No direct `DELETE` statements** are used in control files
- Instead, standard BY commands like:
  - `Remove Movement Zone`
  - `Remove Category`

These ensure:

- Safe and validated delete operations
- Referential integrity is preserved
- Only non-dependent records are removed



## Control Files for Identity-Based Tables

A **control file (CTL)** instruct the system that what you need to do with that data.

### Key Principles

- Avoid using `INSERT`, `UPDATE`, or `DELETE` directly.
- Call commands like `Create Movement Zone`, passing relevant arguments **without IDs**.
- IDs are generated internally by the system to avoid environment-based conflicts.

### Triggers

**Triggers are the starting point of the tracking mechanism.**  
Whenever we want to track changes in the system, we create a corresponding trigger.

- These triggers are responsible for identifying when a specific change occurs - whether it's a **create**, **update**, or **remove** action.
- The core idea is to track every change that results in the execution of a **MOCA command** at the end.

#### How It Works:
- For each operation type (create, update, remove), the trigger **defines the standard MOCA command** that will be used.
- This ensures consistent and reliable tracking across environments, while also enforcing best practices through the use of standard commands.
---

<br><br>


